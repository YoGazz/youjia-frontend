# 🎯 TestPro 实战练习

## 📚 练习说明

这些练习按难度递增，建议按顺序完成。每个练习都有详细的步骤说明和参考答案。

## 🌟 练习1：修改现有页面（入门级）

### 目标
修改登录页面的文案和样式

### 任务
1. 将登录页面的标题改为"欢迎登录 TestPro"
2. 修改登录按钮的颜色为绿色
3. 在登录表单下方添加一行提示文字

### 步骤指导
1. 打开 `src/views/LoginView.vue`
2. 找到标题部分，修改文案
3. 找到按钮部分，添加样式类
4. 在表单后添加提示文字

### 参考答案
```vue
<!-- 在 LoginView.vue 中修改 -->
<template>
  <div class="brand-description">
    <h2>欢迎登录 TestPro</h2>  <!-- 修改这里 -->
    <p>开启全新体验</p>
    <!-- ... 其他内容 ... -->
  </div>
  
  <!-- 在登录按钮部分 -->
  <el-button
    type="success"  <!-- 改为 success 类型 -->
    size="large"
    class="login-btn"
    :loading="authStore.isLoading"
    @click="handleLogin"
  >
    {{ authStore.isLoading ? '登录中...' : '登录' }}
  </el-button>
  
  <!-- 添加提示文字 -->
  <div class="login-tip">
    <p>测试账号：admin / 123456</p>
  </div>
</template>

<style scoped>
.login-tip {
  text-align: center;
  margin-top: 16px;
  color: #666;
  font-size: 14px;
}
</style>
```

## 🌟 练习2：添加简单页面（初级）

### 目标
创建一个"关于我们"页面

### 任务
1. 创建新的页面组件
2. 添加路由配置
3. 在导航菜单中添加链接
4. 页面包含公司介绍和联系方式

### 步骤指导

#### 步骤1：创建页面组件
在 `src/views/` 目录下创建 `AboutView.vue`：

```vue
<template>
  <div class="about-container">
    <div class="about-header">
      <h1>关于 TestPro</h1>
      <p>专业的测试管理平台</p>
    </div>
    
    <div class="about-content">
      <el-row :gutter="20">
        <el-col :span="12">
          <el-card>
            <template #header>
              <h3>公司介绍</h3>
            </template>
            <p>TestPro 是一款专业的测试管理平台，致力于为团队提供高效的测试解决方案。</p>
            <p>我们的使命是让测试工作更加简单、高效、专业。</p>
          </el-card>
        </el-col>
        
        <el-col :span="12">
          <el-card>
            <template #header>
              <h3>联系我们</h3>
            </template>
            <p><strong>邮箱：</strong> contact@testpro.com</p>
            <p><strong>电话：</strong> 400-123-4567</p>
            <p><strong>地址：</strong> 北京市朝阳区科技园区</p>
          </el-card>
        </el-col>
      </el-row>
    </div>
  </div>
</template>

<script setup lang="ts">
// 这个页面比较简单，不需要复杂的逻辑
</script>

<style scoped>
.about-container {
  padding: 20px;
}

.about-header {
  text-align: center;
  margin-bottom: 40px;
}

.about-header h1 {
  font-size: 32px;
  color: #333;
  margin-bottom: 10px;
}

.about-header p {
  font-size: 18px;
  color: #666;
}

.about-content {
  max-width: 1200px;
  margin: 0 auto;
}
</style>
```

#### 步骤2：添加路由
在 `src/router/index.ts` 中添加路由：

```typescript
// 在 children 数组中添加
{
  path: '/about',
  name: 'about',
  component: () => import('@/views/AboutView.vue'),
  meta: { title: '关于我们' },
},
```

#### 步骤3：添加导航菜单
在 `src/components/MainLayout.vue` 中添加菜单项：

```vue
<!-- 在菜单中添加 -->
<el-menu-item index="/about">
  <el-icon><InfoFilled /></el-icon>
  <span>关于我们</span>
</el-menu-item>
```

记得导入图标：
```typescript
import { InfoFilled } from '@element-plus/icons-vue'
```

## 🌟 练习3：表单处理（中级）

### 目标
创建一个"意见反馈"页面，包含表单提交功能

### 任务
1. 创建反馈表单页面
2. 实现表单验证
3. 处理表单提交
4. 显示提交结果

### 步骤指导

#### 创建 `FeedbackView.vue`：

```vue
<template>
  <div class="feedback-container">
    <el-card>
      <template #header>
        <h2>意见反馈</h2>
        <p>您的意见对我们很重要</p>
      </template>
      
      <el-form
        :model="feedbackForm"
        :rules="rules"
        ref="formRef"
        label-width="100px"
      >
        <el-form-item label="姓名" prop="name">
          <el-input
            v-model="feedbackForm.name"
            placeholder="请输入您的姓名"
          />
        </el-form-item>
        
        <el-form-item label="邮箱" prop="email">
          <el-input
            v-model="feedbackForm.email"
            placeholder="请输入您的邮箱"
          />
        </el-form-item>
        
        <el-form-item label="反馈类型" prop="type">
          <el-select v-model="feedbackForm.type" placeholder="请选择反馈类型">
            <el-option label="功能建议" value="feature" />
            <el-option label="问题反馈" value="bug" />
            <el-option label="使用咨询" value="question" />
            <el-option label="其他" value="other" />
          </el-select>
        </el-form-item>
        
        <el-form-item label="反馈内容" prop="content">
          <el-input
            v-model="feedbackForm.content"
            type="textarea"
            :rows="5"
            placeholder="请详细描述您的意见或建议"
          />
        </el-form-item>
        
        <el-form-item>
          <el-button
            type="primary"
            :loading="submitting"
            @click="handleSubmit"
          >
            {{ submitting ? '提交中...' : '提交反馈' }}
          </el-button>
          <el-button @click="handleReset">重置</el-button>
        </el-form-item>
      </el-form>
    </el-card>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive } from 'vue'
import { ElMessage } from 'element-plus'

// 表单引用
const formRef = ref()

// 提交状态
const submitting = ref(false)

// 表单数据
const feedbackForm = reactive({
  name: '',
  email: '',
  type: '',
  content: ''
})

// 验证规则
const rules = {
  name: [
    { required: true, message: '请输入姓名', trigger: 'blur' }
  ],
  email: [
    { required: true, message: '请输入邮箱', trigger: 'blur' },
    { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }
  ],
  type: [
    { required: true, message: '请选择反馈类型', trigger: 'change' }
  ],
  content: [
    { required: true, message: '请输入反馈内容', trigger: 'blur' },
    { min: 10, message: '反馈内容至少10个字符', trigger: 'blur' }
  ]
}

// 提交表单
const handleSubmit = async () => {
  try {
    // 验证表单
    await formRef.value.validate()
    
    submitting.value = true
    
    // 模拟API调用
    await new Promise(resolve => setTimeout(resolve, 2000))
    
    // 这里应该调用真实的API
    // await submitFeedbackApi(feedbackForm)
    
    ElMessage.success('反馈提交成功，感谢您的意见！')
    
    // 重置表单
    handleReset()
    
  } catch (error) {
    if (error !== false) { // 不是验证失败
      ElMessage.error('提交失败，请重试')
    }
  } finally {
    submitting.value = false
  }
}

// 重置表单
const handleReset = () => {
  formRef.value.resetFields()
}
</script>

<style scoped>
.feedback-container {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.el-select {
  width: 100%;
}
</style>
```

## 🌟 练习4：数据列表（中高级）

### 目标
创建一个"任务管理"页面，包含增删改查功能

### 任务
1. 创建任务列表页面
2. 实现添加任务功能
3. 实现编辑任务功能
4. 实现删除任务功能
5. 实现搜索和筛选

### 关键代码片段

```vue
<template>
  <div class="task-management">
    <!-- 操作栏 -->
    <div class="toolbar">
      <el-button type="primary" @click="showAddDialog = true">
        <el-icon><Plus /></el-icon>
        添加任务
      </el-button>
      
      <el-input
        v-model="searchKeyword"
        placeholder="搜索任务..."
        style="width: 300px; margin-left: 20px;"
        @input="handleSearch"
      >
        <template #prefix>
          <el-icon><Search /></el-icon>
        </template>
      </el-input>
    </div>
    
    <!-- 任务列表 -->
    <el-table :data="filteredTasks" style="width: 100%; margin-top: 20px;">
      <el-table-column prop="title" label="任务标题" />
      <el-table-column prop="status" label="状态">
        <template #default="{ row }">
          <el-tag :type="getStatusType(row.status)">
            {{ getStatusText(row.status) }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="priority" label="优先级">
        <template #default="{ row }">
          <el-tag :type="getPriorityType(row.priority)">
            {{ row.priority }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="dueDate" label="截止日期" />
      <el-table-column label="操作" width="200">
        <template #default="{ row }">
          <el-button size="small" @click="editTask(row)">编辑</el-button>
          <el-button size="small" type="success" @click="toggleStatus(row)">
            {{ row.status === 'completed' ? '重新开始' : '完成' }}
          </el-button>
          <el-button size="small" type="danger" @click="deleteTask(row.id)">删除</el-button>
        </template>
      </el-table-column>
    </el-table>
    
    <!-- 添加/编辑对话框 -->
    <el-dialog
      v-model="showAddDialog"
      :title="editingTask ? '编辑任务' : '添加任务'"
    >
      <el-form :model="taskForm" :rules="taskRules" ref="taskFormRef">
        <el-form-item label="任务标题" prop="title">
          <el-input v-model="taskForm.title" />
        </el-form-item>
        <el-form-item label="任务描述" prop="description">
          <el-input v-model="taskForm.description" type="textarea" />
        </el-form-item>
        <el-form-item label="优先级" prop="priority">
          <el-select v-model="taskForm.priority">
            <el-option label="高" value="高" />
            <el-option label="中" value="中" />
            <el-option label="低" value="低" />
          </el-select>
        </el-form-item>
        <el-form-item label="截止日期" prop="dueDate">
          <el-date-picker
            v-model="taskForm.dueDate"
            type="date"
            placeholder="选择日期"
          />
        </el-form-item>
      </el-form>
      <template #footer>
        <el-button @click="showAddDialog = false">取消</el-button>
        <el-button type="primary" @click="saveTask">保存</el-button>
      </template>
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive, computed, onMounted } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import { Plus, Search } from '@element-plus/icons-vue'

// 响应式数据
const tasks = ref([])
const searchKeyword = ref('')
const showAddDialog = ref(false)
const editingTask = ref(null)
const taskFormRef = ref()

// 表单数据
const taskForm = reactive({
  title: '',
  description: '',
  priority: '中',
  dueDate: '',
  status: 'pending'
})

// 表单验证规则
const taskRules = {
  title: [
    { required: true, message: '请输入任务标题', trigger: 'blur' }
  ],
  priority: [
    { required: true, message: '请选择优先级', trigger: 'change' }
  ]
}

// 计算属性：过滤后的任务列表
const filteredTasks = computed(() => {
  if (!searchKeyword.value) {
    return tasks.value
  }
  return tasks.value.filter(task =>
    task.title.toLowerCase().includes(searchKeyword.value.toLowerCase())
  )
})

// 方法
const handleSearch = () => {
  // 搜索逻辑已在计算属性中处理
}

const editTask = (task) => {
  editingTask.value = task
  Object.assign(taskForm, task)
  showAddDialog.value = true
}

const saveTask = async () => {
  try {
    await taskFormRef.value.validate()
    
    if (editingTask.value) {
      // 编辑任务
      const index = tasks.value.findIndex(t => t.id === editingTask.value.id)
      if (index !== -1) {
        tasks.value[index] = { ...taskForm, id: editingTask.value.id }
      }
      ElMessage.success('任务更新成功')
    } else {
      // 添加新任务
      const newTask = {
        ...taskForm,
        id: Date.now(),
        createdAt: new Date().toISOString().split('T')[0]
      }
      tasks.value.push(newTask)
      ElMessage.success('任务添加成功')
    }
    
    // 重置表单
    resetForm()
    showAddDialog.value = false
    
  } catch (error) {
    ElMessage.error('请检查表单输入')
  }
}

const deleteTask = async (id) => {
  try {
    await ElMessageBox.confirm('确定要删除这个任务吗？', '确认删除', {
      confirmButtonText: '确定',
      cancelButtonText: '取消',
      type: 'warning'
    })
    
    tasks.value = tasks.value.filter(task => task.id !== id)
    ElMessage.success('任务删除成功')
  } catch {
    // 用户取消删除
  }
}

const toggleStatus = (task) => {
  task.status = task.status === 'completed' ? 'pending' : 'completed'
  ElMessage.success(`任务已${task.status === 'completed' ? '完成' : '重新开始'}`)
}

const resetForm = () => {
  Object.assign(taskForm, {
    title: '',
    description: '',
    priority: '中',
    dueDate: '',
    status: 'pending'
  })
  editingTask.value = null
}

// 辅助方法
const getStatusType = (status) => {
  return status === 'completed' ? 'success' : 'warning'
}

const getStatusText = (status) => {
  return status === 'completed' ? '已完成' : '进行中'
}

const getPriorityType = (priority) => {
  const types = { '高': 'danger', '中': 'warning', '低': 'info' }
  return types[priority] || 'info'
}

// 初始化数据
onMounted(() => {
  // 模拟初始数据
  tasks.value = [
    {
      id: 1,
      title: '完成用户登录功能',
      description: '实现用户登录和注册功能',
      priority: '高',
      status: 'pending',
      dueDate: '2024-02-15',
      createdAt: '2024-02-01'
    },
    {
      id: 2,
      title: '设计数据库结构',
      description: '设计用户和项目相关的数据库表',
      priority: '中',
      status: 'completed',
      dueDate: '2024-02-10',
      createdAt: '2024-02-01'
    }
  ]
})
</script>

<style scoped>
.task-management {
  padding: 20px;
}

.toolbar {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
}

.el-select {
  width: 100%;
}
</style>
```

## 🎯 练习总结

### 完成这些练习后，您将掌握：

1. **Vue 组件开发** - 创建和修改组件
2. **路由管理** - 添加新页面和导航
3. **表单处理** - 表单验证和提交
4. **数据管理** - 增删改查操作
5. **用户交互** - 对话框、消息提示等
6. **样式设计** - CSS 样式和布局

### 下一步学习建议：

1. **学习 TypeScript** - 提高代码质量
2. **掌握状态管理** - 使用 Pinia 管理全局状态
3. **学习测试** - 编写单元测试
4. **性能优化** - 学习 Vue 性能优化技巧

---

**💡 提示：每完成一个练习，都要测试功能是否正常工作！**
